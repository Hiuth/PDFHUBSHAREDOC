<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
          rel="stylesheet"
  />
  <link
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
          rel="stylesheet"
  />
  <link rel="stylesheet" href="../../static\css\quanlykhachhang.css" />
  <script type="module" src ="../../static/js/Admin/thongbao.js"></script>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <nav class="col-md-3 col-lg-2 d-md-block sidebar">
      <div
              class="logo-section d-flex align-items-center justify-content-center"
      >
        <h3 class="logo">
          <img src="../../static\images\pdfhub 6.png" alt="Logo" style="width: 100px" />
        </h3>
      </div>
      <div class="nav-section">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="dashboard.html">
              <i class="fas fa-tachometer-alt me-2"></i>
              Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="user_profile.html">
              <i class="fas fa-user me-2"></i>
              User Profile
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="quanlytaikhoan.html">
              <i class="fas fa-users-cog me-2"></i>
              Quản lý tài khoản
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="quanlytailieu.html">
              <i class="fas fa-file-alt me-2"></i>
              Quản lý tài liệu
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="quanlyphanhoi.html">
              <i class="fas fa-comment-alt me-2"></i>
              Quản lý phản hồi
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Main content -->
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
      <!-- Top Navbar -->
      <nav class="navbar navbar-expand-lg navbar-light top-navbar">
        <div class="container-fluid">
          <a class="navbar-brand d-none d-md-block" href="#">
            <img
                    src="../../static/images/pdfhub 6.png"
                    alt="Logo"
                    width="100"
            />
          </a>
          <div class="d-flex align-items-center">
            <!-- Bell icon with notification count -->
            <a
                    class="nav-link me-3 position-relative"
                    href="#"
                    id="notificationBell"
                    onclick="toggleNotificationPanel()"
            >
              <i class="fas fa-bell"></i>
              <span
                      id="notificationCount"
                      class="badge bg-danger position-absolute top-0 start-100 translate-middle"
              ></span>
            </a>

            <!-- Notification panel -->
            <div id="notificationPanel" class="notification-panel">
              <h5>Thông báo</h5>

              <ul id="notificationList" class="list-unstyled">
                <!-- Thông báo sẽ được thêm động tại đây -->
              </ul>
            </div>

            <!-- User profile dropdown -->
            <div class="dropdown">
              <a
                      class="nav-link dropdown-toggle d-flex align-items-center"
                      href="#"
                      id="navbarDropdown"
                      role="button"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
              >
                    <span class="user-profile me-2">
                      <img
                              src=""
                              id="avatar"
                              alt="User"
                      />
                    </span>
                Quân sói đơn độc
              </a>
              <ul
                      class="dropdown-menu dropdown-menu-end"
                      aria-labelledby="navbarDropdown"
              >
                <li>
                  <a class="dropdown-item" href="user_profile.html"
                  >Profile</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a
                          class="dropdown-item"
                          href="../../templates/Admin/login.html"
                  >Log out</a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nav>

      <!-- Customer Management Section -->
      <div class="category-management-section mt-5">
        <h2 class="title">Quản lý tài khoản khách hàng</h2>

        <!-- Search Bar -->
        <div class="search-container">
          <input
                  type="text"
                  id="searchAcc"
                  class="search-input"
                  placeholder="Tìm kiếm theo tên khách hàng hoặc email"
          />
          <button class="search-button" id="accButton">
            <img src="../../static\images\bx-search.svg" alt="Search" />
          </button>
        </div>

        <!-- Customer Table -->
        <table class="user-table">
          <thead>
          <tr>
            <th>ID</th>
            <th>Tên khách hàng</th>
            <th>Email</th>
            <th>Points</th>
            <th>Trạng thái</th>
            <th>Hành động</th>
          </tr>
          </thead>
          <tbody>
<!--          <tr>-->
<!--            <td>1</td>-->
<!--            <td>Quân</td>-->
<!--            <td>Quân-onichan@gmail.com</td>-->
<!--            <td class="password-cell">-->
<!--              <span class="password-text">31331</span>-->
<!--            </td>-->
<!--            <td>Active</td>-->
<!--            <td>-->
<!--              <button-->
<!--                      class="edit-button"-->
<!--                      onclick="openModal(1, 'Quân ấm dâu', 'Quân-onichan@gmail.com' ,'31331')"-->
<!--              >-->
<!--                <img src="../../static\images\bxs-edit.svg" alt="Edit" />-->
<!--              </button>-->
<!--              <button-->
<!--                      class="status-button locked"-->
<!--                      onclick="toggleLockStatus(1)"-->
<!--              >-->
<!--                <img src="../../static\images\lock-alt-solid-24.png" alt="Lock" />-->
<!--              </button>-->
<!--            </td>-->
<!--          </tr>-->

          </tbody>
        </table>

        <!-- Modal chỉnh sửa với email readonly -->
        <div class="modal" id="editModal">
          <div class="modal-content">
            <h3>Chỉnh sửa tài khoản khách hàng</h3>
            <label>Tên khách hàng</label>
            <input type="hidden" id="accId"  />
            <input
                    type="text"
                    id="customerName"
                    class="input-field"
                    placeholder="Tên khách hàng"
            />

            <label>Email</label>
            <input
                    type="email"
                    id="customerEmail"
                    class="input-field"
                    placeholder="Email"
                    readonly
                    style="background-color: #f0f0f0"
            />

            <label>Points</label>
            <div class="password-input-container">
              <input
                      type="text"
                      id="customerPassword"
                      class="input-field"
                      placeholder="Password"
              />
            </div>

            <div class="modal-actions">
              <button class="cancel-button" onclick="closeModal()">
                Hủy bỏ
              </button>
              <button class="save-button" id="updateAcc" onclick="  saveChanges()">
                Lưu thay đổi
              </button>
            </div>
          </div>

        </div>

        <div class="modal" id="banModal">
          <div class="modal-content">
            <h3>Ban User</h3>
            <p><strong>User:</strong> <span id="banUserName"></span></p>
            <p><strong>Email:</strong> <span id="banUserEmail"></span></p>

            <label for="banDuration">Danh sách cấm:</label>
            <select id="banDuration">
              <option value="10">10 ngày</option>
              <option value="30">30 ngày</option>
              <option value="permanent">Vĩnh Viễn</option>
            </select>

            <div class="modal-actions">
              <button class="cancel-button" onclick="closeBanModal()">
                Cancel
              </button>
              <button class="save-button" onclick="applyBan()">
                Apply
              </button>
            </div>
          </div>
        </div>
        <!-- Unban Confirmation Modal -->
        <div class="modal" id="unbanModal">
          <div class="modal-content">
            <h3>Xác nhận mở khóa tài khoản</h3>
            <p>Bạn có chắc muốn mở khóa tài khoản này không?</p>
            <div class="modal-actions">
              <button class="cancel-button" onclick="closeUnbanModal()">
                Hủy bỏ
              </button>
              <button class="confirm-button" onclick="confirmUnban()">
                Mở khóa
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<!--<script src="../../static\js\Admin\scripts.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script type="module">
  import { fetchAllAccounts } from "../../static/js/Admin/QuanLyTaiKhoan.js";
  // Gọi hàm sau khi import
  fetchAllAccounts();
</script>
</body>
</html>